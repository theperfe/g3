<!DOCTYPE html>
<meta charset="utf-8">
<head>

<style>

rect {
  fill: none;
  pointer-events: all;
}

.node {
  fill: #000;
}

.cursor {
  fill: none;
  stroke: brown;
  pointer-events: none;
}

.link {
  stroke: #999;
}

</style>


<script type="text/javascript" src="d3.v2.js"></script>
</head>

<body>
<div id="viz"></div>
	<script type="text/javascript">

//Trying to see if we can add nodes just using mouse clicks. Yes, it's working perfectly fine :) This is slightly different from 15.html since I modified this into a neat one after looking at the code here: http://bl.ocks.org/929623.


		var width = 1200;
		var height = 900;
		var fill = d3.scale.category20();

//		var nodes = [{},{}];
//		var links = [{"source":0, "target":1}];

		var force = d3.layout.force()
				.size([width,height])
				.nodes([{}])
//				.links(links)
				.linkDistance(30)
				.charge(-60)
				.on("tick", tick);

		var svg = d3.select("body")
			.append("svg")
			.attr("width",width)
			.attr("height", height)
//			.style("border", "2px solid black")
			.on("mousedown", mousedown);

		var nodes = force.nodes(),
		    links = force.links();

		   var  node = svg.selectAll(".node"),
		    link = svg.selectAll(".link");

		restart();

		function mousedown()
		{
			var point = d3.mouse(this),
				node = {x:point[0],y:point[1]};
				nodes.push(node);
//				console.log("entered");
				restart();
		}

		function tick() {
			link.attr("x1", function(d) { return d.source.x; })
			    .attr("y1", function(d) { return d.source.y; })
			    .attr("x2", function(d) { return d.target.x; })
			    .attr("y2", function(d) { return d.target.y; });

			node.attr("cx", function(d) { return d.x; })
			    .attr("cy", function(d) { return d.y; });
		}

		function restart()
		{

			link = link.data(links);

			  link.enter().append("line")
     			 .attr("class", "link");

			node = node.data(nodes);

		  node.enter().append("circle")
			.attr("class", "node")
		        .attr("r", 5)
      			.call(force.drag);

  		force.start();

		}

</script>

